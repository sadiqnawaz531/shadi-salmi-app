<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>شادی کی سلامی ریکارڈ</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Nastaliq+Urdu:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Noto Nastaliq Urdu', serif;
            background-color: #f9f9f9;
            text-align: right;
            padding: 20px;
        }
        /* Custom styles for table headers to ensure proper alignment in RTL */
        th {
            text-align: right;
        }
        /* Style for editable cells */
        td[contenteditable="true"] {
            background-color: #fffacd; /* Light yellow background for editable cells */
            outline: 1px dashed #ccc; /* Outline to indicate editable */
        }
    </style>
</head>
<body class="container mx-auto p-4">
    <h2 class="text-2xl font-bold mb-6 text-center">شادی کی سلامی ریکارڈ ایپ</h2>

    <div class="bg-white p-6 rounded-lg shadow-md mb-8">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
            <input type="text" id="name" placeholder="نام" class="p-3 border rounded-md focus:outline-none focus:ring focus:border-blue-300">
            <input type="text" id="fatherName" placeholder="ولدیت" class="p-3 border rounded-md focus:outline-none focus:ring focus:border-blue-300">
            <select id="caste" class="p-3 border rounded-md focus:outline-none focus:ring focus:border-blue-300">
                <option value="">قوم منتخب کریں</option> <option value="اعوان">اعوان</option>
                <option value="لوہار">لوہار</option>
                <option value="موچی">موچی</option>
                <option value="صدقال">صدقال</option>
                <option value="کملال">کملال</option>
                <option value="شیخ">شیخ</option>
                <option value="کمبار">کمبار</option>
                <option value="بندیال">بندیال</option>
                <option value="انصاری">انصاری</option>
                <option value="مغل">مغل</option>
                <option value="گجر">گجر</option>
                <option value="قریشی">قریشی</option>
                <option value="سنال">سنال</option>
                </select>
            <input type="text" id="amount" placeholder="رقم (روپے میں)" class="p-3 border rounded-md focus:outline-none focus:ring focus:border-blue-300">
            <select id="address" class="md:col-span-2 p-3 border rounded-md focus:outline-none focus:ring focus:border-blue-300">
                <option value="">پتہ منتخب کریں</option> <option value="کوٹ گلہ">کوٹ گلہ</option>
                <option value="متوکی">متوکی</option>
                <option value="جھٹ">جھٹ</option>
                <option value="میل">میل</option>
                <option value="چھائی">چھائی</option>
                <option value="ڈھوک محمد گل">ڈھوک محمد گل</option>
                <option value="لاڑیاں">لاڑیاں</option>
                <option value="چکی شاہ جی">چکی شاہ جی</option>
                <option value="تراپ">تراپ</option>
                <option value="شاہ محمد والی">شاہ محمد والی</option>
                <option value="ملتان">ملتان</option>
                <option value="پچنید">پچنید</option>
                <option value="تلہ گنگ">تلہ گنگ</option>
                <option value="ڈھوک گلنی خیل">ڈھوک گلنی خیل</option>
                <option value="ڈھوک حجاری خیل">ڈھوک حجاری خیل</option>
                <option value="بنجرہ">بنجرہ</option>
                <option value="نکہ">نکہ</option>
                <option value="پٹی">پٹی</option>
                <option value="خوشحال گڑھ">خوشحال گڑھ</option>
                <option value="ڈھوک حاجیاں">ڈھوک حاجیاں</option>
                </select>
        </div>
        <button onclick="addEntry()" class="w-full bg-blue-500 text-white p-3 rounded-md hover:bg-blue-600 focus:outline-none focus:ring focus:border-blue-300">محفوظ کریں</button>
    </div>

    <div class="bg-white p-6 rounded-lg shadow-md">
        <h3 class="text-xl font-semibold mb-4">ریکارڈز</h3>
        <div class="overflow-x-auto">
            <table class="min-w-full bg-white border rounded-lg">
                <thead>
                    <tr>
                        <th class="py-2 px-4 border-b text-right">سیریل نمبر</th> <th class="py-2 px-4 border-b text-right">نام</th>
                        <th class="py-2 px-4 border-b text-right">ولدیت</th>
                        <th class="py-2 px-4 border-b text-right">قوم</th>
                        <th class="py-2 px-4 border-b text-right">رقم</th>
                        <th class="py-2 px-4 border-b text-right">پتہ</th>
                    </tr>
                </thead>
                <tbody id="recordTable">
                    </tbody>
            </table>
        </div>
    </div>


    <script>
        // Function to load records from local storage
        function loadRecords() {
            const records = JSON.parse(localStorage.getItem('weddingRecords')) || [];
            const tableBody = document.getElementById('recordTable');
            tableBody.innerHTML = ''; // Clear existing records

            records.forEach((record, index) => { // Added index for potential future use, though serial is stored
                const row = tableBody.insertRow();
                // Serial Number Cell - Made editable
                const serialCell = row.insertCell(0);
                serialCell.innerText = record.serialNumber || (index + 1); // Use stored serial or index+1 as fallback
                serialCell.contentEditable = "true"; // Make the cell editable
                serialCell.classList.add('py-2', 'px-4', 'border-b'); // Add classes for styling

                row.insertCell(1).innerText = record.name;
                row.insertCell(2).innerText = record.fatherName;
                row.insertCell(3).innerText = record.caste;
                row.insertCell(4).innerText = record.amount + " روپے"; // Display stored amount
                row.insertCell(5).innerText = record.address; // Display stored address

                // Add event listener to save changes when serial number is edited
                serialCell.addEventListener('blur', function() {
                    record.serialNumber = this.innerText.trim();
                    saveRecords(JSON.parse(localStorage.getItem('weddingRecords'))); // Save the updated records
                });
            });
        }

        // Function to save records to local storage
        function saveRecords(records) {
            localStorage.setItem('weddingRecords', JSON.stringify(records));
        }

        // Function to add a new entry
        function addEntry() {
            const name = document.getElementById('name').value.trim();
            const fatherName = document.getElementById('fatherName').value.trim();
            const caste = document.getElementById('caste').value;
            const amount = document.getElementById('amount').value.trim();
            const address = document.getElementById('address').value;

            // Basic validation
            if (!name || !fatherName || !caste || !amount || !address) {
                alert("براہ کرم تمام مطلوبہ فیلڈز پُر کریں۔ (نام، ولدیت، قوم، رقم، اور پتہ منتخب کریں)"); // Please fill in all required fields.
                return;
            }

            // Get existing records to determine the next serial number
            const records = JSON.parse(localStorage.getItem('weddingRecords')) || [];
            const nextSerialNumber = records.length > 0 ? parseInt(records[records.length - 1].serialNumber || records.length) + 1 : 1;


            const newRecord = {
                serialNumber: nextSerialNumber.toString(), // Assign the next serial number
                name: name,
                fatherName: fatherName,
                caste: caste,
                amount: amount,
                address: address
            };

            // Add the new record and save
            records.push(newRecord);
            saveRecords(records);

            // Reload the table to display the new record
            loadRecords();

            // Clear fields after adding
            document.getElementById('name').value = '';
            document.getElementById('fatherName').value = '';
            document.getElementById('caste').value = '';
            document.getElementById('amount').value = '';
            document.getElementById('address').value = '';
        }

        // Load records when the page loads
        window.onload = loadRecords;

    </script>
</body>
</html>
